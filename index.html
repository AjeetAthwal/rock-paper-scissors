<!DOCTYPE html>

<head>
    <meta charset="UTF-8">

    <title>Rock Paper Scissors</title>
</head>
<button class="rps-choice" data-rps-type="rock">Rock</button>
<button class="rps-choice" data-rps-type="paper">Paper</button>
<button class="rps-choice" data-rps-type="scissors">Scissors</button>
<div class="results-text"></div>
<body>
    <script>
        // generates a computer move in rock paper scissors
        function computerPlay() {
            let num = Math.floor(3 * Math.random());
            if (num == 0) return "rock"
            else if (num == 1) return "scissors";
            return "paper";
        }

        // return round result for a player loss or win (draws dealt with in playRound)
        function roundResult(playerWin, playerSelection, computerSelection) {
            if (playerWin) return "You win! " + playerSelection + " beats " +
                computerSelection;
            else return "You lose! " + computerSelection + " beats " + playerSelection;
        }

        // function that plays one round of rock paper scissors and returns a result
        function playRound(playerSelection, computerSelection) {
            let playerSelectionLowerCase = playerSelection.toLowerCase();
            let computerSelectionLowerCase = computerSelection.toLowerCase();

            let playerWin = true;

            // game logic
            if (playerSelection === computerSelection) return "Draw!";
            switch (playerSelectionLowerCase) {
                case "rock":
                    switch (computerSelectionLowerCase) {
                        case "scissors":
                            playerWin = true;
                            break
                        case "paper":
                            playerWin = false;
                            break

                    }
                    break;
                case "paper":
                    switch (computerSelectionLowerCase) {
                        case "rock":
                            playerWin = true;
                            break
                        case "scissors":
                            playerWin = false;
                            break

                    }
                    break;
                case "scissors":
                    switch (computerSelectionLowerCase) {
                        case "paper":
                            playerWin = true;
                            break
                        case "rock":
                            playerWin = false;
                            break

                    }
                    break;
            }

            return roundResult(playerWin, playerSelectionLowerCase, computerSelectionLowerCase);
        }

        function addRoundResultToScreen(roundResult)
        {
            const results = document.querySelector(".results-text");
            if (results.querySelector("p") !== null){
                results.querySelector("p").removeAttribute("style"); // remove inline style for previous latest result
            }
            let result = document.createElement("p");
            result.innerText = roundResult;
            result.style.fontWeight = "bold"; // ie highlight latest result by  adding inline style
            results.prepend(result);    // add to top of list
        }

        function playRoundListener(e){
            const playerSelection = this.dataset.rpsType;            
            const computerSelection = computerPlay();
            addRoundResultToScreen(playRound(playerSelection, computerSelection));
        }

        const rpsChoice = document.querySelectorAll(".rps-choice");
        rpsChoice.forEach(key => key.addEventListener("click", playRoundListener))
    </script>
</body>

</html>